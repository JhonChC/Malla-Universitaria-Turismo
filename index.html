<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Malla Curricular Turismo</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:'Poppins',sans-serif;background:#eef2f7;padding:20px;}
  .container{max-width:1400px;margin:0 auto;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,0.1);}
  .header{background:linear-gradient(135deg,#43cea2,#185a9d);padding:30px;text-align:center;color:#f5f5f5;}
  .header h1{font-size:2.5rem;} .header p{font-size:1.1rem;opacity:0.9;}
  .stats{display:flex;flex-wrap:wrap;justify-content:space-around;padding:20px;background:#f7f9fc;}
  .stat{background:#fff;border-radius:10px;padding:15px 25px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.05);min-width:120px;margin:10px;}
  .stat .num{font-size:1.8rem;color:#185a9d;}
  .reset-btn{display:block;margin:10px auto 20px;background:#ff4d4d;color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;transition:background .3s;}
  .reset-btn:hover{background:#e04343;}

  .unidad{margin:20px;}
  .unidad-header{background:#185a9d;color:#fff;padding:12px;text-align:center;border-radius:8px;font-size:1.3rem;margin-bottom:10px;}
  .semestres{display:flex;overflow-x:auto;gap:10px;padding-bottom:10px;}
  .semestre{min-width:300px;background:#fafbfc;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.05);}
  .sem-header{background:#4facfe;color:#fff;padding:8px;text-align:center;border-radius:8px 8px 0 0;font-size:1.1rem;}
  .grid{display:flex;flex-direction:column;gap:10px;padding:10px;}

  .materia{background:#fff5f5;border-left:5px solid #ff4d4d;border-radius:6px;padding:14px;position:relative;cursor:pointer;transition:background .2s,border-color .2s;}
  .materia.aprobada{background:#ecffe6;border-left-color:#2ecc71;}
  .materia.bloqueada{opacity:0.6;cursor:not-allowed;}
  .materia:hover:not(.bloqueada){background:#e6fff1;}
  .materia h3{font-size:1rem;color:#333;}
  .materia p{font-size:.85rem;color:#555;margin-top:6px;}
  .tooltip{visibility:hidden;opacity:0;background:#444;color:#fff;padding:5px 8px;border-radius:4px;position:absolute;top:8px;right:8px;font-size:.75rem;transition:opacity .2s;}
  .materia.bloqueada:hover .tooltip{visibility:visible;opacity:1;}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>Malla Curricular – Turismo</h1>
    <p>Haz clic en materias disponibles para aprobarlas y desbloquear las siguientes.</p>
  </div>
  <div class="stats">
    <div class="stat"><div class="num" id="stat-completada">0</div><div>Aprobadas</div></div>
    <div class="stat"><div class="num" id="stat-disponible">0</div><div>Disponibles</div></div>
    <div class="stat"><div class="num" id="stat-total">0</div><div>Total</div></div>
    <div class="stat"><div class="num" id="stat-progreso">0%</div><div>Progreso</div></div>
  </div>
  <button class="reset-btn" onclick="reset()">Reiniciar Progreso</button>

  <!-- Unidades -->
  <div class="unidad"><div class="unidad-header">Preuniversitaria</div>
    <div class="semestres"><div class="semestre" data-ciclo="PRE">
      <div class="sem-header">Semestre Único</div><div class="grid"></div>
    </div></div>
  </div>

  <div class="unidad"><div class="unidad-header">Unidad Básica</div>
    <div class="semestres">
      <div class="semestre" data-ciclo="B1"><div class="sem-header">Nivel 1</div><div class="grid"></div></div>
      <div class="semestre" data-ciclo="B2"><div class="sem-header">Nivel 2</div><div class="grid"></div></div>
      <div class="semestre" data-ciclo="B3"><div class="sem-header">Nivel 3</div><div class="grid"></div></div>
    </div>
  </div>

  <div class="unidad"><div class="unidad-header">Unidad Profesional</div>
    <div class="semestres">
      <div class="semestre" data-ciclo="P4"><div class="sem-header">Nivel 4</div><div class="grid"></div></div>
      <div class="semestre" data-ciclo="P5"><div class="sem-header">Nivel 5</div><div class="grid"></div></div>
      <div class="semestre" data-ciclo="P6"><div class="sem-header">Nivel 6</div><div class="grid"></div></div>
      <div class="semestre" data-ciclo="P7"><div class="sem-header">Nivel 7</div><div class="grid"></div></div>
    </div>
  </div>

  <div class="unidad"><div class="unidad-header">Unidad de Titulación</div>
    <div class="semestres">
      <div class="semestre" data-ciclo="T8"><div class="sem-header">Nivel 8</div><div class="grid"></div></div>
      <div class="semestre" data-ciclo="T9"><div class="sem-header">Nivel 9</div><div class="grid"></div></div>
    </div>
  </div>

  <div class="unidad"><div class="unidad-header">Módulos</div>
    <div class="semestres">
      <div class="semestre" data-ciclo="M"><div class="sem-header">Inglés & Computación</div><div class="grid"></div></div>
    </div>
  </div>

</div>

<script>
const materias=[/* igual que antes: array completo de objetos */];
let aprobadas=JSON.parse(localStorage.getItem('aprobadas')||'{}');

function update(){
  document.querySelectorAll('.semestre').forEach(sec=>{
    const ciclo=sec.dataset.ciclo;
    const grid=sec.querySelector('.grid');
    materias.filter(m=>m.ciclo===ciclo).forEach(m=>{
      let el=document.getElementById(m.id);
      if(!el){
        el=document.createElement('div');
        el.className='materia';
        el.id=m.id;
        el.innerHTML=`<h3>${m.name}</h3><p>Créditos: ${m.credits.toFixed(2)}</p><div class="tooltip"></div>`;
        el.onclick=()=>toggle(m.id);
        grid.appendChild(el);
      }
      const ok=aprobadas[m.id];
      const faltan=m.prereq.filter(p=>!aprobadas[p]).map(p=>materias.find(mm=>mm.id===p).name);
      el.classList.toggle('aprobada',ok);
      el.classList.toggle('bloqueada',!ok && faltan.length);
      el.querySelector('.tooltip').innerText=faltan.length?'Faltan: '+faltan.join(', '):'';
    });
  });
  const total=materias.length, comp=Object.values(aprobadas).filter(v=>v).length;
  const dispo=materias.filter(m=>!aprobadas[m.id]&&!m.prereq.some(p=>!aprobadas[p])).length;
  document.getElementById('stat-total').innerText=total;
  document.getElementById('stat-completada').innerText=comp;
  document.getElementById('stat-disponible').innerText=dispo;
  document.getElementById('stat-progreso').innerText=((comp/total)*100).toFixed(0)+'%';
}

function toggle(id){
  const m=materias.find(x=>x.id===id);
  if(m.prereq.some(p=>!aprobadas[p]))return;
  aprobadas[id]=!aprobadas[id];
  localStorage.setItem('aprobadas',JSON.stringify(aprobadas));
  update();
}

function reset(){
  if(confirm('¿Reiniciar todo el progreso?')){
    aprobadas={};
    localStorage.removeItem('aprobadas');
    update();
  }
}

update();
</script>
</body>
</html>
